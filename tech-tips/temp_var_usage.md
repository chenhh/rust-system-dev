# 臨時值的使用場景

## 什麼是臨時值？

類似於C++中的右值(right value)。

臨時值（temporary value）是指在程式執行過程中，出現在表示式中的短期存在的值，這些值不被繫結到變數，因此它們的生命週期僅限於表示式的執行時間。一旦表示式結束，臨時值就會被銷毀。如果在臨時值被銷毀之前你嘗試借用它們，Rust 編譯器會拋出錯誤，如 error\[E0716]: temporary value dropped while borrowed。

臨時值的常見使用場景：

1. 函數或方法返回的值。
2. 字面量（Literal)。
3. 臨時計算的表示式。
4. 鏈式方法呼叫。
5. 閉包的返回值。
6. Option、Result 等列舉類型的值。

如何避免臨時值相關的生命週期問題：

1. 將臨時值繫結到變數。
2. 避免直接對臨時值進行借用。
3. 在鏈式呼叫中繫結中間結果。
4. 對閉包返回值進行儲存。
5. 處理 Option 和 Result。

基本原則：

* 始終將臨時值繫結到變數：通過將臨時值儲存在變數中，可以延長其生命週期，確保它在借用時仍然有效。&#x20;
* 鏈式呼叫時儲存中間結果：在鏈式方法呼叫中，避免直接借用臨時值，確保每個步驟的結果都儲存在變數中。&#x20;
* 正確處理返回值：無論是函數、方法還是閉包的返回值，儲存它們是確保生命週期合理的關鍵。

## 參考資料

[http://520code.net/index.php/archives/54/](http://520code.net/index.php/archives/54/)
